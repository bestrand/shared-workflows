name: Generate Release Notes

on:
  workflow_dispatch:

jobs:
  get-commits-diff:
    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v3
    - name: Create Release Notes
      id: release-notes
      uses: actions/github-script@v6
      env:
        REPO: "bestrand/test-app"
        BASE: "67858ba"
        HEAD: "f43e76d"
      with:
        github-token: ${{ secrets.COMMIT_READ }}
        script: |
          const releaseNotes = require('./.github/js/releaseNotes.js');
          return await releaseNotes("${{ env.BASE }}", "${{ env.HEAD }}", "${{ env.REPO }}", github)
    - name: Get result
      run: echo ${{ toJSON(steps.release-notes.outputs.result) }}
